<?xml version="1.0" encoding="utf-8"?>
<!--
    Este archivo XML define las interfaces de usuario (vistas) para los modelos
    de Libro, Autor y Miembro del módulo de biblioteca.
    Incluye vistas de tipo lista (tree) y formulario (form), así como las
    acciones de ventana (act_window) que las invocan.
-->
<odoo>
    <!-- ====================================================== -->
    <!--                   VISTAS DE LIBROS                     -->
    <!-- ====================================================== -->

    <!--
        VISTA DE ÁRBOL (LISTA) PARA EL MODELO `biblioteca.libro`
        Define las columnas que se mostrarán en la lista de libros.
    -->
    <record id="view_libro_tree" model="ir.ui.view">
        <field name="name">biblioteca.libro.tree</field>
        <field name="model">biblioteca.libro</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="autor_id"/>
                <field name="estado"/>
                <field name="genero"/>
                <field name="multa"/>
                <field name="monto"/>
            </tree>
        </field>
    </record>

    <!--
        VISTA DE FORMULARIO PARA EL MODELO `biblioteca.libro`
        Define la estructura del formulario para crear o editar un libro.
    -->
    <record id="view_libro_form" model="ir.ui.view">
        <field name="name">biblioteca.libro.form</field>
        <field name="model">biblioteca.libro</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <!-- Sección principal con la información básica del libro -->
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="autor_id"/>
                            <field name="editorial"/>
                        </group>
                        <group>
                            <field name="estado" readonly="1"/>
                            <field name="genero"/>
                            <field name="anio_publicacion"/>
                        </group>
                    </group>
                    <!-- Sección para configurar los costos asociados al préstamo -->
                    <group string="Precios y Multas">
                        <field name="monto"/>
                        <field name="multa"/>
                    </group>
                    <!-- Campo de texto para la descripción o sinopsis -->
                    <group>
                        <field name="descripcion" nolabel="1" placeholder="Añade una descripción del libro..."/>
                    </group>
                    <!-- Pestaña para mostrar el historial de préstamos del libro -->
                    <notebook>
                        <page string="Historial de Préstamos">
                            <field name="prestamo_ids" readonly="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="miembro_id"/>
                                    <field name="fecha_prestamo"/>
                                    <field name="estado"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- ====================================================== -->
    <!--                   VISTAS DE AUTORES                    -->
    <!-- ====================================================== -->

    <!-- VISTA DE ÁRBOL (LISTA) PARA EL MODELO `biblioteca.autor` -->
    <record id="view_autor_tree" model="ir.ui.view">
        <field name="name">biblioteca.autor.tree</field>
        <field name="model">biblioteca.autor</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="nacionalidad"/>
                <field name="total_libros"/>
            </tree>
        </field>
    </record>

    <!-- VISTA DE FORMULARIO PARA EL MODELO `biblioteca.autor` -->
    <record id="view_autor_form" model="ir.ui.view">
        <field name="name">biblioteca.autor.form</field>
        <field name="model">biblioteca.autor</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <!-- Información principal del autor -->
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="nacionalidad"/>
                            <field name="fecha_nacimiento"/>
                        </group>
                        <group>
                            <field name="total_libros" readonly="1"/>
                        </group>
                    </group>
                    <!-- Biografía del autor -->
                    <group>
                        <field name="biografia" nolabel="1" placeholder="Biografía del autor..."/>
                    </group>
                    <!-- Lista de libros asociados a este autor -->
                    <notebook>
                        <page string="Libros Escritos">
                            <field name="libro_ids" readonly="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="estado"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- ====================================================== -->
    <!--                  VISTAS DE MIEMBROS                    -->
    <!-- ====================================================== -->

    <!-- VISTA DE ÁRBOL (LISTA) PARA EL MODELO `biblioteca.miembro` -->
    <record id="view_miembro_tree" model="ir.ui.view">
        <field name="name">biblioteca.miembro.tree</field>
        <field name="model">biblioteca.miembro</field>
        <field name="arch" type="xml">
            <tree>
                <field name="codigo_miembro"/>
                <field name="name"/>
                <field name="dni"/>
                <field name="email"/>
                <field name="telefono"/>
                <field name="estado"/>
                <field name="prestamos_activos"/>
                <field name="deuda_total"/>
            </tree>
        </field>
    </record>

    <!-- VISTA DE FORMULARIO PARA EL MODELO `biblioteca.miembro` -->
    <record id="view_miembro_form" model="ir.ui.view">
        <field name="name">biblioteca.miembro.form</field>
        <field name="model">biblioteca.miembro</field>
        <field name="arch" type="xml">
            <form string="Miembro de Biblioteca">
                <sheet>
                    <group>
                        <group>
                            <field name="codigo_miembro" readonly="1"/>
                            <field name="name"/>
                            <field name="dni"/>
                            <field name="estado"/>
                        </group>
                        <group>
                            <field name="email"/>
                            <field name="telefono"/>
                            <field name="direccion"/>
                        </group>
                        <group string="Información de la Membresía">
                            <field name="fecha_registro" readonly="1"/>
                            <field name="prestamos_activos" readonly="1"/>
                            <field name="deuda_total" readonly="1"/>
                        </group>
                    </group>
                    <!-- Pestaña para el historial de préstamos del miembro -->
                    <notebook>
                        <page string="Historial de Préstamos">
                            <field name="prestamo_ids" readonly="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="libro_id"/>
                                    <field name="fecha_prestamo"/>
                                    <field name="fecha_devolucion"/>
                                    <field name="estado"/>
                                    <field name="multa"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- ====================================================== -->
    <!--                ACCIONES DE VENTANA                     -->
    <!-- ====================================================== -->
    <!--
        Define una acción de ventana que abre las vistas de Libros.
        Se asocia a un menú para ser accesible desde la UI.
    -->
    <record id="action_libro" model="ir.actions.act_window">
        <field name="name">Libros</field>
        <field name="res_model">biblioteca.libro</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                ¡Añade un nuevo libro a tu biblioteca!
            </p>
        </field>
    </record>

    <!-- Acción de ventana para los Autores -->
    <record id="action_autor" model="ir.actions.act_window">
        <field name="name">Autores</field>
        <field name="res_model">biblioteca.autor</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Registra un nuevo autor.
            </p>
        </field>
    </record>

    <!-- Acción de ventana para los Miembros -->
    <record id="action_miembro" model="ir.actions.act_window">
        <field name="name">Miembros</field>
        <field name="res_model">biblioteca.miembro</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Añade un nuevo miembro a la biblioteca.
            </p>
        </field>
    </record>
</odoo>
